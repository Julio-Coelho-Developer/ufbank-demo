<!DOCTYPE html>
    <html>
        <head>

            <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
            <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">
            <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">
        
            <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="css/style.css">

            
            <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script> 
            <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>	

        
        </head>
        <body class="login-body">
            <div class="container-fluid login-wrapper">
                <div class="login-box">
                    <div class="row">
                        <div class="col-md-12 col-sm-2 col-12 ">
                            <h3 class="mb-2 text-center">ITConnectJobs</h3>
                            <br>
                            
                            <form action="/autenticar" method="post" class="mt-2">
                                <!--Começo do input do usuário--> 
                                <div class="form-group input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fa fa-user"></i></span>
                                    </div>
                                    <input type="text" name="login" class="form-control" placeholder="Usuário" required>
                                </div>
                                <!--Começo do input da senha-->
                                <div class="form-group input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fa fa-lock"></i></span>
                                    </div>
                                    <input id="password-field"  name="senha" type="password" class="form-control" placeholder="Senha" required>
                                </div>
        
                                <div class="form-group">
                                    <button id="Entrar" type="submit" class="form-control btn btn-theme btn-block p-2 mb-1">Entrar</button>
                                </div>
                    
                            </form>

                                <p><small class="text-center">Não tem conta ? Crie agora.</small></p>
                                
                                <div class="form-group">
                                    <button id="cadastrar" action="/cadastrar"  type="submit" class="form-control btn btn-theme-create btn-block p-2 mb-1">Cadastrar-se</button>
                                </div>
        
                        </div>
                    </div>
                </div>
            </div>    
          </body>

          <script>
			$(document).ready(() => {

				$('Entrar').on('click', (e) => {
					e.preventDefault() 

					let dados = $('form').serialize()
					
					$.ajax({
						type: 'post', /*Método*/
						url: 'autenticar',
						data: dados, //x-www-form-urlencoded
						dataType: 'json',
						success: dados => { 
                            if(dados){
                                window.location.href= '/fluxogramas';
                            }else{
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Usuário inválido.',
                                    text: 'O login ou senha estão incorretos.',
                                })
                            }
                        
                        },
						error: erro => { console.log(erro) }
					})
				})

                $('cadastrar').on('click', (e) => {
                    console.log('Entrei aqui!')
					window.location.href= '/cadastrar';

					
				})
				
			})
		</script>



    </html>
